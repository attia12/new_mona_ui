<section class="py-5 position-relative" style="background-image: url(assets/images/bg/07.jpg); background-repeat: no-repeat; background-size: cover; background-position: top center;">
  <div class="bg-overlay bg-dark opacity-8"></div>
  <!-- Container START -->
  <div class="container">
    <div class="py-5">
      <div class="row position-relative">
        <div class="col-xl-8 col-lg-10 mx-auto pt-sm-5 text-center">
          <!-- Nav -->
          <ul class="nav nav-divider justify-content-center text-white pt-2 small mb-4">
            <li class="nav-item">
              <a class="nav-link text-white" href="#!"> Events</a>
            </li>
            <li class="nav-item">
              <a class="nav-link text-white" href="#!"> Live Event</a>
            </li>
            <li class="nav-item">
              <a class="nav-link text-white" href="#!"> Featured </a>
            </li>
            <li class="nav-item">
              <a class="nav-link text-white" href="#!"> Music </a>
            </li>
          </ul>
          <!-- Title -->
          <h1 class="text-white">Details of Event</h1>
        </div>
      </div>
    </div>
  </div>
</section>

<section class="py-5">
  <div class="container">
    <div class="row g-4">
      <div class="col-lg-4">
        <div class="card card-body">
          <button class="btn btn-primary w-100" (click)="participateInEvent()" [disabled]="isParticipating">
            {{ isParticipating ? 'Already Participated' : 'Participate' }}
          </button>
          <div class="mt-4">
            <ul class="list-unstyled mb-4">
              <li class="d-flex justify-content-between mb-3"> <strong class="w-150px">Show Date & time:</strong> <span class="text-end"> 12 December, 8:20PM </span></li>
              <li class="d-flex justify-content-between mb-3"> <strong class="w-150px">Ticket Price:</strong> <span class="text-end"> $210.00 </span></li>
              <li class="d-flex justify-content-between mb-3"> <strong class="w-150px">Entry fees:</strong> <span class="text-end"> $1 per ticket </span></li>
              <li class="d-flex justify-content-between mb-3"> <strong class="w-150px">Address:</strong> <span class="text-end"> 750 Sing Sing Rd, Horseheads, NY, 14845 </span></li>
            </ul>
            <iframe class="w-100 d-block rounded-bottom grayscale" height="230" src="https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d3022.9663095343008!2d-74.00425878428698!3d40.74076684379132!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x89c259bf5c1654f3%3A0xc80f9cfce5383d5d!2sGoogle!5e0!3m2!1sen!2sin!4v1586000412513!5m2!1sen!2sin"  style="border:0;" aria-hidden="false" tabindex="0"></iframe>
          </div>
        </div>
      </div>
      <div class="col-lg-8">
        <div class="card card-body">
          <!-- Overview -->
          <h4>{{ event?.title }}</h4>

          <p>{{ event?.description }}</p>

          <img class="img-fluid mb-3" [src]="'data:image/jpeg;base64,' + event?.image" alt="Event Image">

          <h6>{{ event?.category }} Event</h6>

          <p>
            This event will take place in <strong>{{ event?.location }}</strong> on
            <strong>{{ event?.date | date: 'EEEE, MMM d, y hh:mm a' }}</strong>.
            The event is currently <span class="badge bg-success" *ngIf="event?.status === 'ACTIVE'">Active</span>
            <span class="badge bg-danger" *ngIf="event?.status === 'CANCELLED'">Cancelled</span>.
          </p>



<!--          <div class="mt-4 mt-sm-5">-->
<!--            &lt;!&ndash; Host START &ndash;&gt;-->
<!--            <h4>Host </h4>-->
<!--            <div class="row g-4">-->
<!--              <div class="col-sm-4">-->
<!--                &lt;!&ndash; Host Item &ndash;&gt;-->
<!--                <div class="d-flex align-items-center">-->
<!--                  <div class="avatar avatar-lg me-3">-->
<!--                    <img class="avatar-img rounded-circle" src="assets/images/avatar/01.jpg" alt="">-->
<!--                  </div>-->
<!--                  <div>-->
<!--                    <h6 class="mb-0">Bryan Knight</h6>-->
<!--                    <span>Founder</span>-->
<!--                  </div>-->
<!--                </div>-->
<!--              </div>-->
<!--              <div class="col-sm-4">-->
<!--                &lt;!&ndash; Host Item &ndash;&gt;-->
<!--                <div class="d-flex align-items-center">-->
<!--                  <div class="avatar avatar-lg me-3">-->
<!--                    <img class="avatar-img rounded-circle" src="assets/images/avatar/02.jpg" alt="">-->
<!--                  </div>-->
<!--                  <div>-->
<!--                    <h6 class="mb-0">Carolyn Ortiz</h6>-->
<!--                    <span>CEO</span>-->
<!--                  </div>-->
<!--                </div>-->
<!--              </div>-->
<!--              <div class="col-sm-4">-->
<!--                &lt;!&ndash; Host Item &ndash;&gt;-->
<!--                <div class="d-flex align-items-center">-->
<!--                  <div class="avatar avatar-lg me-3">-->
<!--                    <img class="avatar-img rounded-circle" src="assets/images/avatar/03.jpg" alt="">-->
<!--                  </div>-->
<!--                  <div>-->
<!--                    <h6 class="mb-0">Dennis Barrett</h6>-->
<!--                    <span>Manager</span>-->
<!--                  </div>-->
<!--                </div>-->
<!--              </div>-->
<!--            </div>-->
<!--          </div>-->
          <!-- Host END -->

          <div class="mt-4 mt-sm-5">
            <h4>Feedbacks </h4>
            <button class="btn btn-outline-primary w-100 mt-3" data-bs-toggle="modal" data-bs-target="#feedbackModal">
              Add Feedback
            </button>
            <div class="accordion accordion-icon" id="accordionschedules">
              <!-- Accordion item -->
            <app-feedback *ngFor="let feed of feedbacks" [feedback]="feed"></app-feedback>
              <!-- Accordion item -->

            </div>
          </div>
          <div class="mb-3" [formGroup]="form">

            <ngx-star-rating
              [formControl]="form.controls['rating']"
              [id]="'rating'"
              (change)="onRatingChange($event)">
            </ngx-star-rating>



          </div>

          <!-- Statistics START -->
          <div class="card card-body p-4 mt-5">
            <div class="row g-2">
              <div class="col-sm-4">
                <!-- Visitors -->
                <div class="d-flex">
                  <i class="bi bi-people fs-4"></i>
                  <div class="ms-3">
                    <h5 class="mb-0">{{event?.maxParticipants}}</h5>
                    <p class="mb-0">Participants</p>
                  </div>
                </div>
              </div>

              <div class="col-sm-4">
                <!-- Attendance -->
                <div class="d-flex">
                  <i class="bi bi-cash-coin fs-4"></i>
                  <div class="ms-3">
                    <h5 class="mb-0">${{ event?.price }}</h5>
                    <p class="mb-0">Price</p>
                  </div>
                </div>
              </div>
            </div>
          </div>




        </div>
      </div>
    </div>
  </div>
</section>
<div class="modal fade" id="feedbackModal" tabindex="-1" aria-labelledby="feedbackModalLabel" aria-hidden="true">
  <div class="modal-dialog modal-dialog-centered">
    <div class="modal-content">
      <!-- Modal Header -->
      <div class="modal-header">
        <h5 class="modal-title" id="feedbackModalLabel">Ajouter un Feedback</h5>
        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
      </div>

      <!-- Modal Body -->
      <div class="modal-body">
        <form>
          <!-- Rating -->
<!--          <div class="mb-3">-->
<!--            <label class="form-label">Rating (1-5)</label>-->
<!--            <input type="number" class="form-control" [(ngModel)]="feedback.rating" name="rating" min="1" max="5">-->
<!--          </div>--><


          <!-- Comment -->
          <div class="mb-3">
            <label class="form-label">Comment</label>
            <textarea class="form-control" [(ngModel)]="feedback.comment" name="comment" rows="3"></textarea>
          </div>
        </form>
      </div>

      <!-- Modal Footer -->
      <div class="modal-footer">
        <button type="button" class="btn btn-danger" data-bs-dismiss="modal">Cancel</button>
        <button type="button" class="btn btn-success" (click)="submitFeedback()">Submit Feedback</button>
      </div>
    </div>
  </div>
</div>
